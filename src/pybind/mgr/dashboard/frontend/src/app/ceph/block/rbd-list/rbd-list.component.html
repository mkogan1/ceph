<cd-view-cache *ngFor="let viewCacheStatus of viewCacheStatusList"
               [status]="viewCacheStatus.status"
               [statusFor]="viewCacheStatus.statusFor"></cd-view-cache>

<cd-table #table
          [data]="images"
          columnMode="flex"
          [columns]="columns"
          identifier="unique_id"
          [searchableObjects]="true"
          forceIdentifier="true"
          selectionType="single"
          (updateSelection)="updateSelection($event)">
  <cd-table-actions class="table-actions"
                    [permission]="permission"
                    [selection]="selection"
                    [tableActions]="tableActions">
  </cd-table-actions>
  <cd-rbd-details cdTableDetail
                  [selection]="selection">
  </cd-rbd-details>
</cd-table>

<ng-template #usageNotAvailableTooltipTpl>
  <div i18n
       [innerHtml]="'Only available for RBD images with <strong>fast-diff</strong> enabled'"></div>
</ng-template>

<ng-template #provisionedNotAvailableTooltipTpl
             let-row="row">
  <span *ngIf="row.disk_usage === null; else provisioned">
    <span class="text-muted"
          [tooltip]="usageNotAvailableTooltipTpl"
          placement="top"
          i18n>N/A</span>
    </span>
  <ng-template #provisioned
               i18n>{{row.disk_usage | dimlessBinary}}</ng-template>
</ng-template>

<ng-template #totalProvisionedNotAvailableTooltipTpl
             let-row="row">
  <span *ngIf="row.total_disk_usage === null; else totalProvisioned">
    <span class="text-muted"
          [tooltip]="usageNotAvailableTooltipTpl"
          placement="top"
          i18n>N/A</span>
  </span>
  <ng-template #totalProvisioned
               i18n>{{row.total_disk_usage | dimlessBinary}}</ng-template>
</ng-template>

<ng-template #parentTpl
             let-value="value">
  <span *ngIf="value">{{ value.pool_name }}/{{ value.image_name }}@{{ value.snap_name }}</span>
  <span *ngIf="!value">-</span>
</ng-template>

<ng-template #flattenTpl
             let-value>
  You are about to flatten
  <strong>{{ value.child }}</strong>.
  <br>
  <br> All blocks will be copied from parent
  <strong>{{ value.parent }}</strong> to child
  <strong>{{ value.child }}</strong>.
</ng-template>

<ng-template #removingStatTpl
             let-column="column"
             let-value="value"
             let-row="row">

  <i [ngClass]="[icons.spinner, icons.spin]"
     *ngIf="row.cdExecuting"></i>
  <span [ngClass]="column?.customTemplateConfig?.valueClass">
    {{ value }}
  </span>
  <span *ngIf="row.cdExecuting"
        [ngClass]="column?.customTemplateConfig?.executingClass ?
        column.customTemplateConfig.executingClass :
        'text-muted italic'">
    ({{ row.cdExecuting }})
  </span>
  <i *ngIf="row.source && row.source === 'REMOVING'"
     i18n-title
     title="RBD in status 'Removing'"
     class="{{ icons.warning }} warn"></i>
</ng-template>
